<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}Plotline Report{% endblock %}</title>
    <style>
      :root {
          --color-bg-primary: #0f172a;
          --color-bg-secondary: #1e293b;
          --color-bg-tertiary: #334155;
          --color-bg-card: #1e293b;
          --color-bg-hover: #334155;
          --color-text-primary: #f8fafc;
          --color-text-secondary: #94a3b8;
          --color-text-muted: #64748b;
          --color-text-inverse: #0f172a;
          --color-accent-primary: #3b82f6;
          --color-accent-secondary: #8b5cf6;
          --color-accent-tertiary: #06b6d4;
          --color-success: #22c55e;
          --color-warning: #f59e0b;
          --color-error: #ef4444;
          --color-delivery-high: #22c55e;
          --color-delivery-medium: #f59e0b;
          --color-delivery-low: #ef4444;
          --color-border: #334155;
          --color-border-light: #475569;
          --font-sans: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Inter", system-ui, sans-serif;
          --font-mono: "SF Mono", "Fira Code", "Consolas", monospace;
          --radius-sm: 4px;
          --radius-md: 8px;
          --radius-lg: 12px;
          --radius-full: 9999px;
          --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.3);
          --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.3);
          --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.3);
          --transition-fast: 150ms ease;
          --transition-normal: 250ms ease;
      }

      * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
      }

      body {
          font-family: var(--font-sans);
          background: var(--color-bg-primary);
          color: var(--color-text-primary);
          line-height: 1.6;
          min-height: 100vh;
      }

      .container {
          max-width: 1400px;
          margin: 0 auto;
          padding: 2rem;
      }

      .header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 2rem;
          padding-bottom: 1rem;
          border-bottom: 1px solid var(--color-border);
      }

      .header h1 {
          font-size: 1.5rem;
          font-weight: 600;
      }

      .header-meta {
          display: flex;
          gap: 1rem;
          align-items: center;
      }

      .badge {
          display: inline-flex;
          align-items: center;
          padding: 0.25rem 0.75rem;
          border-radius: var(--radius-full);
          font-size: 0.75rem;
          font-weight: 500;
          text-transform: uppercase;
          letter-spacing: 0.05em;
      }

      .badge-primary {
          background: var(--color-accent-primary);
          color: white;
      }

      .badge-secondary {
          background: var(--color-bg-tertiary);
          color: var(--color-text-secondary);
      }

      .badge-success {
          background: var(--color-success);
          color: white;
      }

      .badge-warning {
          background: var(--color-warning);
          color: var(--color-text-inverse);
      }

      .badge-error {
          background: var(--color-error);
          color: white;
      }

      .card {
          background: var(--color-bg-card);
          border: 1px solid var(--color-border);
          border-radius: var(--radius-lg);
          padding: 1.5rem;
          margin-bottom: 1rem;
          transition: border-color var(--transition-fast);
      }

      .card:hover {
          border-color: var(--color-border-light);
      }

      .card-header {
          display: flex;
          justify-content: space-between;
          align-items: flex-start;
          margin-bottom: 1rem;
      }

      .card-title {
          font-size: 1.125rem;
          font-weight: 600;
          margin-bottom: 0.25rem;
      }

      .card-subtitle {
          font-size: 0.875rem;
          color: var(--color-text-secondary);
      }

      .btn {
          display: inline-flex;
          align-items: center;
          justify-content: center;
          gap: 0.5rem;
          padding: 0.5rem 1rem;
          border-radius: var(--radius-md);
          font-size: 0.875rem;
          font-weight: 500;
          cursor: pointer;
          border: none;
          transition: all var(--transition-fast);
      }

      .btn-primary {
          background: var(--color-accent-primary);
          color: white;
      }

      .btn-primary:hover {
          background: #2563eb;
      }

      .btn-secondary {
          background: var(--color-bg-tertiary);
          color: var(--color-text-primary);
      }

      .btn-secondary:hover {
          background: var(--color-bg-hover);
      }

      .btn-success {
          background: var(--color-success);
          color: white;
      }

      .btn-error {
          background: var(--color-error);
          color: white;
      }

      .btn-sm {
          padding: 0.25rem 0.5rem;
          font-size: 0.75rem;
      }

      .btn-lg {
          padding: 0.75rem 1.5rem;
          font-size: 1rem;
      }

      .grid {
          display: grid;
          gap: 1rem;
      }

      .grid-2 {
          grid-template-columns: repeat(2, 1fr);
      }

      .grid-3 {
          grid-template-columns: repeat(3, 1fr);
      }

      .grid-4 {
          grid-template-columns: repeat(4, 1fr);
      }

      @media (max-width: 1024px) {
          .grid-4 { grid-template-columns: repeat(2, 1fr); }
          .grid-3 { grid-template-columns: repeat(2, 1fr); }
      }

      @media (max-width: 640px) {
          .grid-4, .grid-3, .grid-2 { grid-template-columns: 1fr; }
          .container { padding: 1rem; }
      }

      .progress-bar {
          height: 4px;
          background: var(--color-bg-tertiary);
          border-radius: var(--radius-full);
          overflow: hidden;
      }

      .progress-bar-fill {
          height: 100%;
          background: var(--color-accent-primary);
          transition: width var(--transition-normal);
      }

      .delivery-badge {
          display: inline-flex;
          align-items: center;
          gap: 0.25rem;
      }

      .delivery-bar {
          display: flex;
          gap: 2px;
      }

      .delivery-bar-segment {
          width: 4px;
          height: 12px;
          border-radius: 1px;
          background: var(--color-bg-tertiary);
      }

      .delivery-bar-segment.filled {
          background: var(--color-success);
      }

      .delivery-bar-segment.medium {
          background: var(--color-warning);
      }

      .delivery-bar-segment.low {
          background: var(--color-error);
      }

      .pill {
          display: inline-flex;
          align-items: center;
          padding: 0.125rem 0.5rem;
          background: var(--color-bg-tertiary);
          border-radius: var(--radius-full);
          font-size: 0.75rem;
          color: var(--color-text-secondary);
          margin-right: 0.25rem;
          margin-bottom: 0.25rem;
      }

      .pill:hover {
          background: var(--color-bg-hover);
          color: var(--color-text-primary);
      }

      .timecode {
          font-family: var(--font-mono);
          font-size: 0.875rem;
          color: var(--color-text-secondary);
      }

      .text-muted {
          color: var(--color-text-muted);
      }

      .text-secondary {
          color: var(--color-text-secondary);
      }

      .text-success {
          color: var(--color-success);
      }

      .text-warning {
          color: var(--color-warning);
      }

      .text-error {
          color: var(--color-error);
      }

      .mt-1 { margin-top: 0.25rem; }
      .mt-2 { margin-top: 0.5rem; }
      .mt-4 { margin-top: 1rem; }
      .mb-1 { margin-bottom: 0.25rem; }
      .mb-2 { margin-bottom: 0.5rem; }
      .mb-4 { margin-bottom: 1rem; }

      .flex { display: flex; }
      .flex-col { flex-direction: column; }
      .items-center { align-items: center; }
      .justify-between { justify-content: space-between; }
      .gap-1 { gap: 0.25rem; }
      .gap-2 { gap: 0.5rem; }
      .gap-4 { gap: 1rem; }

      @media print {
          body {
              background: white;
              color: black;
          }
          .card {
              background: white;
              border: 1px solid #ddd;
              break-inside: avoid;
          }
          .no-print {
              display: none !important;
          }
          .container {
              max-width: 100%;
              padding: 0;
          }
      }

      {% block extra_styles %}{% endblock %}
    </style>
  </head>
  <body>
    <div class="container">{% block content %}{% endblock %}</div>

    <script>
      const reportData = {{ data_json | safe }};

      {% block scripts %}{% endblock %}
    </script>
  </body>
</html>
